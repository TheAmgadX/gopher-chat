<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gopher Chat - Discord Style</title>
    <link rel="stylesheet" href="../static/css/style.css">
</head>
<body>
    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h2>Welcome to Gopher Chat</h2>
            <div class="login-form">
                <input type="text" id="usernameInput" placeholder="Enter your username" maxlength="20">
                <button id="loginBtn">Join Chat</button>
            </div>
            <div class="error-message" id="loginError"></div>
        </div>
    </div>

    <!-- Main Chat Interface -->
    <div id="chatApp" class="chat-app" style="display: none;">
        <!-- Server List Sidebar (minimal for this implementation) -->
        <div class="server-list">
            <div class="server-item active">
                <div class="server-icon">GC</div>
            </div>
        </div>

        <!-- Channels Sidebar -->
        <div class="channels-sidebar">
            <div class="server-header">
                <h3>Gopher Chat</h3>
                <div class="server-options">‚öôÔ∏è</div>
            </div>
            
            <div class="channel-category">
                <div class="category-header">
                    <span class="category-arrow">‚ñº</span>
                    <span>CHAT ROOMS</span>
                    <button class="refresh-rooms" id="refreshRooms" title="Refresh rooms">‚Üª</button>
                </div>
                <div class="channel-list" id="roomList">
                    <!-- Rooms will be populated dynamically -->
                </div>
            </div>

            <div class="user-area">
                <div class="user-info">
                    <div class="user-avatar">
                        <div class="avatar-circle" id="userAvatar"></div>
                        <div class="status-indicator"></div>
                    </div>
                    <div class="user-details">
                        <div class="username" id="currentUsername">User</div>
                        <div class="user-id">#0001</div>
                    </div>
                    <div class="user-controls">
                        <button class="user-control-btn" id="editUsernameBtn" title="Edit username">‚úèÔ∏è</button>
                        <button class="user-control-btn" id="leaveRoomBtn" title="Leave current room">üö™</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Chat Area -->
        <div class="main-content">
            <!-- Chat Header -->
            <div class="chat-header">
                <div class="channel-info">
                    <span class="channel-hash">#</span>
                    <span class="channel-name" id="currentRoomName">Select a room</span>
                    <div class="channel-divider">|</div>
                    <span class="channel-description" id="roomDescription">Choose a room from the sidebar to start chatting</span>
                </div>
                <div class="chat-controls">
                    <button class="header-btn" id="membersBtn" title="Show members">üë•</button>
                </div>
            </div>

            <!-- Messages Area -->
            <div class="messages-container" id="messagesContainer">
                <div class="messages-wrapper" id="messagesWrapper">
                    <!-- Welcome message -->
                    <div class="welcome-message">
                        <h2>Welcome to Gopher Chat!</h2>
                        <p>This is a real-time chat application built with Go and WebSockets.</p>
                        <p>Select a room from the sidebar to start chatting with other users.</p>
                    </div>
                </div>
            </div>

            <!-- Message Input -->
            <div class="message-input-container">
                <div class="message-input-wrapper" id="messageInputWrapper">
                    <input type="text" 
                           id="messageInput" 
                           placeholder="Message #general" 
                           disabled
                           maxlength="2000">
                    <button id="sendBtn" class="send-button" disabled>Send</button>
                </div>
            </div>
        </div>

        <!-- Members Sidebar (hidden by default) -->
        <div class="members-sidebar" id="membersSidebar" style="display: none;">
            <div class="members-header">
                <h4>Members</h4>
                <button class="close-members" id="closeMembersBtn">√ó</button>
            </div>
            <div class="members-list" id="membersList">
                <!-- Members will be populated dynamically -->
            </div>
        </div>
    </div>

    <!-- Username Edit Modal -->
    <div id="usernameModal" class="modal">
        <div class="modal-content">
            <h3>Change Username</h3>
            <div class="username-form">
                <input type="text" id="newUsernameInput" placeholder="Enter new username" maxlength="20">
                <div class="modal-buttons">
                    <button id="cancelUsernameBtn" class="btn-secondary">Cancel</button>
                    <button id="saveUsernameBtn" class="btn-primary">Save</button>
                </div>
            </div>
            <div class="error-message" id="usernameError"></div>
        </div>
    </div>

    <!-- Connection Status -->
    <div id="connectionStatus" class="connection-status">
        <span class="status-dot"></span>
        <span class="status-text">Connecting...</span>
    </div>

    <script src="../static/js/app.js"></script>
</body>
</html>